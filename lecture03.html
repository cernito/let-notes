<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="cs" xml:lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="theme-color" content="#3498db" />
  <meta name="author" content="TomÃ¡Å¡ ÄŒernÃ­k" />
  <meta name="description" content="Elektrody pro snÃ­mÃ¡nÃ­ biologickÃ½ch potenciÃ¡lÅ¯ - StudijnÃ­ materiÃ¡ly">
  <title>Elektrody pro snÃ­mÃ¡nÃ­ biologickÃ½ch potenciÃ¡lÅ¯</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body>

<!-- Controls Panel -->
<div class="controls-panel">
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="ğŸ” Hledat v poznÃ¡mkÃ¡ch..." />
  </div>
  <div class="controls-buttons">
    <button class="btn" onclick="window.location.href='index.html'" title="ZpÄ›t na hlavnÃ­ strÃ¡nku">ğŸ  DomÅ¯</button>
    <button class="btn" onclick="toggleAllSections()">Rozbalit vÅ¡e</button>
    <button class="btn" onclick="collapseAllSections()">Sbalit vÅ¡e</button>
    <button class="btn btn-icon" onclick="toggleTheme()" title="PÅ™epnout tmavÃ½ reÅ¾im">ğŸŒ™</button>
    <button class="btn btn-icon" onclick="window.print()" title="Vytisknout">ğŸ–¨ï¸</button>
  </div>
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>
</div>

<header id="title-block-header">
  <h1 class="title">Elektrody pro snÃ­mÃ¡nÃ­ biologickÃ½ch potenciÃ¡lÅ¯</h1>
  <p class="author">TomÃ¡Å¡ ÄŒernÃ­k</p>
</header>

<div class="sections">
<p>Elektroda â€“ rozhranÃ­ dvou svÄ›tÅ¯</p>
<ul>
<li><p>Elektroda pÅ™edstavuje rozhranÃ­ mezi Å¾ivÃ½m a neÅ¾ivÃ½m
svÄ›tem</p></li>
<li><p>Ãškolem elektrody je pÅ™enÃ¡Å¡et elektrickÃ½ signÃ¡l zÂ organismu do
pÅ™Ã­stroje a pÅ™Ã­padnÄ› i obrÃ¡cenÄ›</p></li>
<li><p>PoÅ¾adavky:</p></li>
<li><p>MinimÃ¡lnÄ› ovlivÅˆovat mÄ›Å™enÃ½ signÃ¡l</p></li>
<li><p>NepoÅ¡kozovat pacienta</p></li>
<li><p>MÃ­t stabilnÃ­ vlastnosti vÂ Äase</p></li>
</ul>
<section id="spojenÃ¡-elektroda-elektrolyt" class="sectionbox">
<h2>SpojenÃ¡ elektroda-elektrolyt</h2>
<ul>
<li><p>Organismus a pÅ™Ã­vodnÃ­ vodiÄe nevedou proud stejnÃ½m
zpÅ¯sobem</p></li>
<li><p><strong>Organismus je vodiÄ 2. tÅ™Ã­dy</strong> â€“ proud je pÅ™enÃ¡Å¡en
ionty</p></li>
<li><p><strong>KovovÃ© vodiÄe jsou vodiÄe 1. tÅ™Ã­dy</strong> â€“ proud je
pÅ™enÃ¡Å¡en elektrody</p></li>
<li><p>Na rozhranÃ­ elektroda-elektrolyt dochÃ¡zÃ­ ke zmÄ›nÄ› typu
vodivosti</p></li>
<li><p>Na rozhranÃ­ nelze pÅ™enÃ¡Å¡et elektrony zÂ kovu do elektrolytu, tudÃ­Å¾
pÅ™enos probÃ­hÃ¡ pomocÃ­:</p></li>
<li><p>OxidaÄnÃ­ch reakcÃ­ â€“ elektroda uvolÅˆuje elektrony</p></li>
<li><p>RedukÄnÃ­ch reakcÃ­ â€“ elektroda pÅ™ijÃ­mÃ¡ elektrony</p></li>
<li><p>VÃ½sledkem tÄ›chto reakcÃ­ je <strong>elektrickÃ¡ dvojvrstva</strong>
â€“ probÄ›hne redox reakce â€“ dojde kÂ separaci nÃ¡bojÅ¯ (nÃ¡boj na elektrodÄ› a
opaÄnÃ½ vÂ elektrolytu) â€“ nÃ¡boje se nemohou vyruÅ¡it (hranice
kov-elektrolyt neumoÅ¾Åˆuje volnÃ½ pÅ™echod elektronÅ¯) â€“ vznikne struktura â€“
chovÃ¡ se jako kondenzÃ¡tor</p></li>
<li><p>ElektrickÃ¡ dvojvrstva</p></li>
<li><p>PotenciÃ¡lovÃ½ rozdÃ­l mezi elektrodou a elektrolytem a tomuto
potenciÃ¡lu Å™Ã­kÃ¡me pÅ¯lÄlÃ¡nkovÃ½ potenciÃ¡l â€“ E = Em â€“ Ee â€“ nelze zmÄ›Å™it
pÅ™Ã­mo, protoÅ¾e lze mÄ›Å™it pouze rozdÃ­l potenciÃ¡lÅ¯ mezi dvÄ›ma
elektrodami</p></li>
</ul>
</section>
<section id="galvanickÃ½-ÄlÃ¡nek" class="sectionbox">
<h2>GalvanickÃ½ ÄlÃ¡nek</h2>
<ul>
<li><p>TvoÅ™Ã­ ho dvojice elektrod ponoÅ™enÃ½ch do elektrolytu</p></li>
<li><p>MÄ›Å™Ã­me jejich rozdÃ­l pÅ¯lÄlÃ¡nkovÃ½ch potenicÃ¡lÅ¯ U = E1 â€“ E2,
neznÃ¡me absolutnÃ­ hodnoty, ale rozdÃ­ly, tak si jednu elektrodu
definujeme jako 0 VÂ a Å™Ã­kÃ¡me ji standartnÃ­ elektroda</p></li>
<li><p>Na pacientovi mÃ¡m jednu mÄ›Å™Ã­cÃ­ elektrodu a jednu referenÄnÃ­
elektrodu â€“ ty dvÄ› tvoÅ™Ã­ galvanickÃ¡ ÄlÃ¡nek</p></li>
</ul>
</section>
<section id="vÃ½poÄet-pÅ¯lÄlÃ¡nkovÃ©ho-potenciÃ¡lu" class="sectionbox">
<h2>VÃ½poÄet pÅ¯lÄlÃ¡nkovÃ©ho potenciÃ¡lu</h2>
<ul>
<li>PomocÃ­ Nernstovy rovnice</li>
</ul>
<figure>
<img src="media/image1.png" style="width:2.37586in;height:0.67882in"
alt="Obsah obrÃ¡zku PÃ­smo, text, ÄÃ­slo, bÃ­lÃ© Obsah generovanÃ½ pomocÃ­ AI mÅ¯Å¾e bÃ½t nesprÃ¡vnÃ½." />
<figcaption aria-hidden="true">Obsah obrÃ¡zku PÃ­smo, text, ÄÃ­slo, bÃ­lÃ©
Obsah generovanÃ½ pomocÃ­ AI mÅ¯Å¾e bÃ½t nesprÃ¡vnÃ½.</figcaption>
</figure>
<p>StandartnÃ­ vodÃ­kovÃ¡ elektroda</p>
<ul>
<li><p>PlatinovÃ¡ elektroda</p></li>
<li><p>Elektolyt â€“ HCl</p></li>
<li><p>ProbublÃ¡vÃ¡nÃ­ vodÃ­kem</p></li>
<li><p>Za standartnÃ­ch podmÃ­nek mÃ¡ definovanÃ½ potenciÃ¡l 0 V</p></li>
</ul>
<p>StandartnÃ­ kalomelovÃ¡ elektroda</p>
<ul>
<li><p>Elektroda sÂ Hg2Cl2 = kalomel â€“ dochÃ¡zÃ­ na nÃ­ k redukci</p></li>
<li><p>Elektrolyt â€“ nasycenÃ½ KCl</p></li>
<li><p>StabilnÃ­, a proto se Äasto pouÅ¾Ã­vÃ¡ jako referenÄnÃ­ elektroda,
kterÃ¡ mÃ¡ pÅ™i teplotÄ› 25 stupÅˆÅ¯ E0 = 0.242 V</p></li>
<li><p>Elektroda i kalomel ve sklenÄ›nÃ© baÅˆce</p></li>
</ul>
<p>Polarizace elektrod</p>
<ul>
<li><p>Dokonale polarizovanÃ¡ elektroda</p></li>
<li><p>NeprobÃ­hÃ¡ pÅ™enos nÃ¡boje pÅ™es rozhranÃ­ â€“ neprobÄ›hnou Å¾Ã¡dnÃ© redox
reakce</p></li>
<li><p>NabÃ­jÃ­cÃ­ se elektrickÃ¡ dvojvrstva a elektroda se chovÃ¡ jako
kondÃ­k â€“ napÄ›tÃ­ na elektrodÄ› â€“ napÄ›tÃ­ na elektrodÄ› roste
sÂ Äasem</p></li>
<li><p>Dokonale nepolarizovanÃ¡ elektroda</p></li>
<li><p>Redox reakce probÃ­hajÃ­ okamÅ¾itÄ› â€“ nÃ¡boj prochÃ¡zÃ­ pÅ™es
rozhranÃ­</p></li>
<li><p>Elektroda nemÄ›nÃ­ svÅ¯j potenciÃ¡l a napÄ›tÃ­ na nÃ­ zÅ¯stÃ¡va prakticky
konstantnÃ­</p></li>
</ul>
<p>PolarizaÄnÃ­ potenciÃ¡l</p>
<ul>
<li><p>PolarizaÄnÃ­ potenciÃ¡l je dodateÄnÃ© napÄ›tÃ­, kterÃ© se objevÃ­ na
elektrodÄ›, kdyÅ¾ jÃ­ teÄe proud</p></li>
<li><p>CelkovÃ¡ polarizaÄnÃ­ potenciÃ¡l je rozdÄ›lenÃ­ ze 3 ÄÃ¡stÃ­:</p></li>
<li><p>OhmickÃ½ â€“ Ãºbytek napÄ›tÃ­ na odporu elektrolytu</p></li>
<li><p>KoncentraÄnÃ­ â€“ BereÅ¡ lidi z mÃ­stnosti jednÄ›mi dveÅ™mi rychleji,
neÅ¾ se stÃ­hajÃ­ vracet â€“ vznikÃ¡ nerovnovÃ¡ha â€“ ionty se spotÅ™ebovÃ¡vajÃ­ u
jednÃ© elektrody a u druhÃ© se hromadÃ­</p></li>
<li><p>AktivaÄnÃ­ â€“ minimÃ¡lnÃ­ energie, kterou musÃ­m dodat, aby se redox
reakce vÅ¯bec rozbÄ›hla</p></li>
</ul>
<p>MateriÃ¡ly elektrod</p>
<ul>
<li><p>PoÅ¾adavky:</p></li>
<li><p>Biokompatibilita</p></li>
<li><p>ChemickÃ¡ stabilita</p></li>
<li><p>Elektrody 1. druhu:</p></li>
<li><p>Kov + roztok iontÅ¯ tÃ©hoÅ¾ kovu â€“ Ag</p></li>
<li><p>Elektrody 2. druhu</p></li>
<li><p>Kov pokrytÃ½ jeho tÄ›Å¾ko rozpustnou solÃ­ â€“ Ag/AgCl a ponoÅ™enÃ½ do
roztoku, kterÃ½ obsahuje stejnÃ© anionty, jako mÃ¡ sÅ¯l</p></li>
<li><p>Velmi stabilnÃ­ potenciÃ¡l</p></li>
</ul>
<p>Model rozhranÃ­ elektroda-elektrolyt</p>
<figure>
<img src="media/image2.png" style="width:1.79952in;height:3.0147in"
alt="Obsah obrÃ¡zku diagram, Å™ada/pruh, TechnickÃ½ vÃ½kres Obsah generovanÃ½ pomocÃ­ AI mÅ¯Å¾e bÃ½t nesprÃ¡vnÃ½." />
<figcaption aria-hidden="true">Obsah obrÃ¡zku diagram, Å™ada/pruh,
TechnickÃ½ vÃ½kres Obsah generovanÃ½ pomocÃ­ AI mÅ¯Å¾e bÃ½t
nesprÃ¡vnÃ½.</figcaption>
</figure>
<p>Impedance rozhranÃ­</p>
<p><img src="media/image3.png" style="width:0.83345in;height:0.66676in"
alt="Obsah obrÃ¡zku text, PÃ­smo, symbol, bÃ­lÃ© Obsah generovanÃ½ pomocÃ­ AI mÅ¯Å¾e bÃ½t nesprÃ¡vnÃ½." />
Reaktance kondenzÃ¡toru â€“ malÃ¡ frekvence â€“ reaktance je velkÃ¡</p>
<ul>
<li><p>Pro malÃ© frekvence je reaktance kondenzÃ¡toru mnohem vÄ›tÅ¡Ã­ neÅ¾ Rp
a vÄ›tev sÂ Cp je prakticky odpojenÃ¡ Z = Rp + Rs</p></li>
<li><p>Pro velkÃ© frekvence mÃ¡ kondenzÃ¡tor velmi malÃ½ odpor a chovÃ¡ se
tÃ©mÄ›Å™ jako zkrat, takÅ¾e proud teÄe hlavnÄ› pÅ™es Cp â€“ Z = Rs â€“ pÅ™i
rychlÃ½ch zmÄ›nÃ¡ch se elektroda nestihne polarizovat</p></li>
</ul>
<figure>
<img src="media/image4.png" style="width:2.75378in;height:1.52827in"
alt="Obsah obrÃ¡zku text, Å™ada/pruh, diagram, VykreslenÃ½ graf Obsah generovanÃ½ pomocÃ­ AI mÅ¯Å¾e bÃ½t nesprÃ¡vnÃ½." />
<figcaption aria-hidden="true">Obsah obrÃ¡zku text, Å™ada/pruh, diagram,
VykreslenÃ½ graf Obsah generovanÃ½ pomocÃ­ AI mÅ¯Å¾e bÃ½t
nesprÃ¡vnÃ½.</figcaption>
</figure>
</section>
<section id="elektrody-pro-snÃ­mÃ¡nÃ­-biologickÃ½ch-potenciÃ¡lÅ¯"
class="sectionbox">
<h2>Elektrody pro snÃ­mÃ¡nÃ­ biologickÃ½ch potenciÃ¡lÅ¯</h2>
<p><strong>DÄ›lenÃ­</strong>:</p>
<ul>
<li><p><strong>PovrchovÃ©</strong> â€“ pro EKG, EEG, povrchovÃ© EMG</p></li>
<li><p>PlovoucÃ­ kovovÃ©</p></li>
<li><p>SuchÃ© izolovanÃ© nebo neizolovanÃ©</p></li>
<li><p><strong>PodpovrchovÃ©</strong> â€“ pronikajÃ­ pod povrch
kÅ¯Å¾e</p></li>
<li><p>VpichovÃ© elektrody â€“ intramuskulÃ¡rnÃ­ EMG</p></li>
<li><p>ImplantibilnÃ­ elektrody â€“ kardiostimulÃ¡tory</p></li>
<li><p>MenÅ¡Ã­ vliv kÅ¯Å¾e a impedance rozhranÃ­</p></li>
<li><p><strong>Mikroelektrody</strong></p></li>
<li><p>Pro snÃ­mÃ¡nÃ­ bunÄ›ÄnÃ½ch potenciÃ¡lÅ¯, neurofyziologie</p></li>
<li><p>Velmi malÃ¡ plocha, vysokÃ¡ impedance</p></li>
</ul>
<p>RozhranÃ­ elektroda-kÅ¯Å¾e</p>
<ul>
<li>PÅ™i povrchovÃ©m snÃ­mÃ¡nÃ­ nÄ›mÄ›Å™Ã­m pÅ™Ã­mo tkÃ¡Åˆ, ale:</li>
</ul>
<p>elektroda â†’ elektrolyt â†’ kÅ¯Å¾e â†’ tÄ›lnÃ­ tekutiny</p>
<ul>
<li><p>Je sloÅ¾enÃ© rozhranÃ­, kterÃ© zahrnuje:</p></li>
<li><p>RozhranÃ­ elektroda â€“ elektrolyt</p></li>
<li><p>RozhranÃ­ Elektrolyt â€“ kÅ¯Å¾e</p></li>
<li><p>Elektrolyt (gel, pasta) â€“ vyplÅˆuje nervnosti mezi elektrodou a
kÅ¯Å¾Ã­ a zajiÅ¡Å¥uje iontovou vodivost</p></li>
<li><p>KÅ¯Å¾e â€“ nenÃ­ homogennÃ­ vodiÄ â€“ vodivost zvyÅ¡ujÃ­ potnÃ­
kanÃ¡lky</p></li>
</ul>
<figure>
<img src="media/image5.png" style="width:3.57409in;height:4.90669in"
alt="Obsah obrÃ¡zku diagram, PlÃ¡n, TechnickÃ½ vÃ½kres, text Obsah generovanÃ½ pomocÃ­ AI mÅ¯Å¾e bÃ½t nesprÃ¡vnÃ½." />
<figcaption aria-hidden="true">Obsah obrÃ¡zku diagram, PlÃ¡n, TechnickÃ½
vÃ½kres, text Obsah generovanÃ½ pomocÃ­ AI mÅ¯Å¾e bÃ½t nesprÃ¡vnÃ½.</figcaption>
</figure>
</section>
<section id="plovoucÃ­-elektrody" class="sectionbox">
<h2>PlovoucÃ­ elektrody</h2>
<ul>
<li><p>kovovÃ¡ elektroda v kombinaci s vodivou pastou, vodivÃ¡ pasta
vyrovnÃ¡vÃ¡ nerovnosti mezi elektrodou a kÅ¯Å¾Ã­ â€“ kov plave
vÂ elektrolytu</p></li>
<li><p>materiÃ¡ly:</p></li>
<li><p>argentchloridovÃ¡ aleketroda (Ag/AgCl), kde je elektrolyt KCl â€“ je
velmi obtÃ­Å¾nÄ› polarizovatelnÃ¡, tudÃ­Å¾ mÃ¡ stabilnÃ­ pÅ¯lÄlÃ¡nkovÃ½
potenciÃ¡l</p></li>
</ul>
</section>
<section id="elektrodovÃ©-stripy-a-gripy" class="sectionbox">
<h2>ElektrodovÃ© stripy a gripy</h2>
<ul>
<li><p>pole elektrod na spoleÄnÃ©m nosiÅ¡i sÂ pevnÄ› danou
geometriÃ­</p></li>
<li><p>napÅ™: SubdurÃ¡lnÃ­ elektrody</p></li>
</ul>
</section>
<section id="vpichovÃ©-elektrody" class="sectionbox">
<h2>VpichovÃ© elektrody</h2>
<ul>
<li><p>hlavnÄ› pro intramuskulÃ¡rnÃ­ EMG vÂ podobÄ› jehliÄek</p></li>
<li><p>velmi malÃ¡ snÃ­macÃ­ oblast a vysokÃ© prostorovÃ© rozliÅ¡enÃ­</p></li>
<li><p>invazivnÃ­ metoda, bolestivost</p></li>
</ul>
</section>
<section id="suchÃ©-elektrody-neizolovanÃ©" class="sectionbox">
<h2>SuchÃ© elektrody neizolovanÃ©</h2>
<ul>
<li><p>kovovÃ¡ elektroda umÃ­stÄ›na pÅ™Ã­mo na kÅ¯Å¾i â€“ bez
elektrolytu</p></li>
<li><p>vysokÃ¡ impedance a citlivost na pohyb</p></li>
</ul>
</section>
<section id="suchÃ©-elektrody-izolovanÃ©" class="sectionbox">
<h2>SuchÃ© elektrody izolovanÃ©</h2>
<ul>
<li><p>kovovÃ¡ elektrod pÅ™Ã­mo na kÅ¯Å¾i â€“ sÂ elektrolytem</p></li>
<li><p>kondenzÃ¡tor elektroda-povrch kÅ¯Å¾e sÂ typickou kapacitou 0.1-1
nF</p></li>
</ul>
</section>
<section id="faktory-ovlivÅˆujÃ­cÃ­-vlastnosti-elektrod"
class="sectionbox">
<h2>Faktory ovlivÅˆujÃ­cÃ­ vlastnosti elektrod</h2>
<ul>
<li><p>zneÄiÅ¡tÄ›nÃ­ elektrody nebo elektrolytu â€“ zvÃ½Å¡enÃ­ odporu</p></li>
<li><p>vysychÃ¡nÃ­ elektrolytu â€“ zhorÅ¡enÃ­ iontovÃ© vodivosti</p></li>
<li><p>pohybovÃ© artefakty â€“ zmÄ›na tlaku elektrody</p></li>
</ul>
</section>
</div>


<script>
// Detect if user is on mobile
const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

// Add collapsible class to all sectionboxes
document.querySelectorAll('.sectionbox').forEach(box => {
  box.classList.add('collapsible');
});

// Theme Toggle
function toggleTheme() {
  const html = document.documentElement;
  const currentTheme = html.getAttribute('data-theme');
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', newTheme);
  localStorage.setItem('theme', newTheme);
  
  const btn = event.target.closest('.btn-icon');
  if (btn) {
    btn.textContent = newTheme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
  }
  
  const metaTheme = document.querySelector('meta[name="theme-color"]');
  if (metaTheme) {
    metaTheme.content = newTheme === 'dark' ? '#1a1d23' : '#3498db';
  }
}

// Load saved theme
(function() {
  const savedTheme = localStorage.getItem('theme') || 'light';
  document.documentElement.setAttribute('data-theme', savedTheme);
  const themeBtn = document.querySelector('.btn-icon');
  if (themeBtn && savedTheme === 'dark') {
    themeBtn.textContent = 'â˜€ï¸';
  }
  
  const metaTheme = document.querySelector('meta[name="theme-color"]');
  if (metaTheme) {
    metaTheme.content = savedTheme === 'dark' ? '#1a1d23' : '#3498db';
  }
})();

// Collapsible sections with touch optimization
document.querySelectorAll('.sectionbox.collapsible > h2').forEach(header => {
  header.addEventListener('click', function(e) {
    e.preventDefault();
    this.parentElement.classList.toggle('collapsed');
    updateProgress();
    
    if (isMobile && !this.parentElement.classList.contains('collapsed')) {
      setTimeout(() => {
        this.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }, 100);
    }
  });
  
  header.addEventListener('touchstart', function(e) {
    this.style.webkitUserSelect = 'none';
    this.style.userSelect = 'none';
  });
});

function toggleAllSections() {
  document.querySelectorAll('.sectionbox.collapsible').forEach(section => {
    section.classList.remove('collapsed');
  });
  updateProgress();
}

function collapseAllSections() {
  document.querySelectorAll('.sectionbox.collapsible').forEach(section => {
    section.classList.add('collapsed');
  });
  updateProgress();
  
  if (isMobile) {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
}

// Search functionality
const searchInput = document.getElementById('searchInput');
let searchTimeout;

searchInput.addEventListener('input', function() {
  clearTimeout(searchTimeout);
  const delay = isMobile ? 400 : 300;
  
  searchTimeout = setTimeout(() => {
    const query = this.value.toLowerCase().trim();
    const sections = document.querySelectorAll('.sectionbox');
    let firstMatch = null;
    
    sections.forEach(section => {
      section.classList.remove('highlight');
      
      if (query === '') {
        section.style.display = '';
        return;
      }
      
      const text = section.textContent.toLowerCase();
      if (text.includes(query)) {
        section.style.display = '';
        section.classList.add('highlight');
        section.classList.remove('collapsed');
        if (!firstMatch) firstMatch = section;
      } else {
        section.style.display = 'none';
      }
    });
    
    if (isMobile && firstMatch && query !== '') {
      setTimeout(() => {
        firstMatch.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }, 100);
    }
    
    updateProgress();
  }, delay);
});

if (isMobile) {
  document.addEventListener('touchstart', function(e) {
    if (!searchInput.contains(e.target) && searchInput.value === '') {
      searchInput.blur();
    }
  });
}

// Progress tracking
function updateProgress() {
  const sections = document.querySelectorAll('.sectionbox.collapsible');
  const expanded = document.querySelectorAll('.sectionbox.collapsible:not(.collapsed)');
  const percentage = (expanded.length / sections.length) * 100;
  document.getElementById('progressBar').style.width = percentage + '%';
}

// Scroll progress indicator
let scrollTimeout;
window.addEventListener('scroll', function() {
  clearTimeout(scrollTimeout);
  scrollTimeout = setTimeout(() => {
    const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (winScroll / height) * 100;
    document.getElementById('progressBar').style.width = scrolled + '%';
  }, isMobile ? 50 : 0);
}, { passive: true });

// Initialize
updateProgress();

// Auto-collapse all sections on mobile
if (isMobile) {
  document.querySelectorAll('.sectionbox.collapsible').forEach(section => {
    section.classList.add('collapsed');
  });
  updateProgress();
}

// Keyboard shortcuts (desktop only)
if (!isMobile) {
  document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
      e.preventDefault();
      searchInput.focus();
    }
    
    if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
      e.preventDefault();
      toggleTheme();
    }
  });
}

document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  });
});

if ('vibrate' in navigator && isMobile) {
  document.querySelectorAll('.sectionbox.collapsible > h2').forEach(header => {
    header.addEventListener('click', function() {
      navigator.vibrate(10);
    });
  });
}

if (isMobile) {
  if (navigator.hardwareConcurrency && navigator.hardwareConcurrency < 4) {
    document.documentElement.style.setProperty('--transition-fast', '0ms');
    document.documentElement.style.setProperty('--transition-normal', '0ms');
    document.documentElement.style.setProperty('--transition-slow', '0ms');
  }
}
</script>

</body>
</html>